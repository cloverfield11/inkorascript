#!/bin/bash

# КРАЙНЕ ОПАСНО: Полное затирание диска
# После этого система не сможет загрузиться!

echo "================================================"
echo "КРАЙНЕ ОПАСНО: Этот скрипт полностью уничтожит систему!"
echo "После этого ВМ нужно будет пересоздавать!"
echo "================================================"

read -p "Вы абсолютно уверены? Введите 'DESTROY_EVERYTHING': " confirmation

if [ "$confirmation" != "DESTROY_EVERYTHING" ]; then
    echo "Отменено."
    exit 1
fi

# Определение корневого диска
ROOT_DISK=$(lsblk -no pkname / 2>/dev/null | head -1)
if [ -z "$ROOT_DISK" ]; then
    ROOT_DISK="/dev/sda"
fi

echo "Будет затерт диск: $ROOT_DISK"

# Быстрое затирание загрузочных секторов (делает систему не загружаемой)
dd if=/dev/zero of=/dev/$ROOT_DISK bs=512 count=1 2>/dev/null

echo "Диск затерт. Система уничтожена."
echo "Виртуальную машину необходимо пересоздать."
